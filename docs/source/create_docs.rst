Create a documentation
----------------------

This document describes the steps to create and publish a project documentation to `Read the Docs  <http://readthedocs.io>`_.


Workflow
========

Docs are being autogenerated and published at readthedocs.io (RtD) after changes to the upstream repository. The repository itself contains some build configuration and, of course, the contents of the documention. Autogeneration requires the repository to be connected with RtD.


Markup
======

The documentation is using the `reStructuredText <https://www.sphinx-doc.org/en/master/usage/restructuredtext/index.html>`_ markup.


Installation
============

.. note:: There is no installation required at all to create docs on RtD. However, to be able to develop and preview the documentation, it makes sense to build them locally.

Python
^^^^^^

The documentation is built using `Sphinx <https://www.sphinx-doc.org>`_, which requires python3 and the python package manager pip to be installed on the local machine.

.. code-block:: bash

  $ python3 --version
  Python 3.8.6
  $ pip --version
  pip 21.0.1 from ../lib/python3.8/site-packages/pip (python 3.8)

Shpinx
^^^^^^

Installing and setting up Sphinx is described in detail here: `Getting started <https://docs.readthedocs.io/en/stable/intro/getting-started-with-sphinx.html>`_

The projects needs to have a root ``docs`` folder where all contents and configuration live.

.. code-block:: bash

  cd project_root
  mkdir docs
  cd docs
  spinx-quickstart

.. note:: When running the ``sphinx-quickstart`` command and asked:

  * leave `release` empty
  * separate build and source folder

Markdown support
^^^^^^^^^^^^^^^^

To be able to import the project's README.md into the docs, install and configure also the `m2r2 tool <https://github.com/crossnox/m2r2>`_.

RtD Theme
^^^^^^^^^^^^^^^^

Docs can be themed, the `Read the Docs theme <https://sphinx-rtd-theme.readthedocs.io>`_ needs to be installed and configured as well.

Requirements file
^^^^^^^^^^^^^^^^^

You should add all installed pip requirements to a ``docs/requirements.txt`` file in order to have RtD use the right versions. Example:

.. code-block::

  sphinx==3.2.1
  sphinx_rtd_theme==0.5.1
  m2r2==0.2.7


Creating the docs
=================

.. code-block:: bash

  cd docs
  make html
  firefox build/html/index.html

Create a ``docs/.gitignore`` file to exclude the local documentation build:

.. code-block:: bash

  build


Adding docs to RtD
==================

* Create an account on RtD and log in
* Grant RtD access to your team's Github, Bitbucket or Gitlab account
* Click **Import a project** and follow the instructions

`Import Guide <https://docs.readthedocs.io/en/stable/intro/import-guide.html>`_


VSCode extensions
=================

The `reStructuredText extension <https://docs.restructuredtext.net/index.html>`_ is recommended to write and preview the documentation using VSCode.
